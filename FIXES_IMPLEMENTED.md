# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ —É–ª—É—á—à–µ–Ω–∏—è –ø–∞—Ä—Å–µ—Ä–∞ (31 –æ–∫—Ç—è–±—Ä—è 2025)

## üìã –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏

### 1. **–ü–∞—Ä—Å–µ—Ä –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ "–ù–∞—á–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥"**
- –ó–∞–ø—Ä–æ—Å –ø—Ä–æ—Ö–æ–¥–∏—Ç 1-5 –º–∏–Ω—É—Ç, –Ω–æ –ø–∞—Ä—Å–∏–Ω–≥ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
- –°—á–µ—Ç—á–∏–∫ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
- **–ü—Ä–∏—á–∏–Ω–∞**: –ö–Ω–æ–ø–∫–∞ "–ù–∞—á–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥" –≤—ã–∑—ã–≤–∞–µ—Ç `startRealParsing()` (—Ä–µ–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ —Å–∞–π—Ç–∞), —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç Puppeteer –∏ –≤—Ä–µ–º–µ–Ω–∏

### 2. **–ö–Ω–æ–ø–∫–∞ "–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ –ë–î" –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞**
- **–ü—Ä–∏—á–∏–Ω–∞**: –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ –Ω—É–∂–Ω—ã–µ API endpoints (`/api/db/overview`, `/api/db/data`, `/api/db/regions`)
- –§—É–Ω–∫—Ü–∏—è `startParsing()` –≤ main.js –ø—ã—Ç–∞–ª–∞—Å—å –≤—ã–∑–≤–∞—Ç—å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ endpoints

### 3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ü–µ–Ω—ã**
- –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –≤ –ë–î –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞–ª–∏—Å—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω—ã
- **–ü—Ä–∏—á–∏–Ω–∞**: –§—É–Ω–∫—Ü–∏—è `insertOrUpdateListing()` –≤ db-pg.js –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª–∞ —Å—Ç–∞—Ä—É—é —Ü–µ–Ω—É –∏ –Ω–µ –ø–∏—Å–∞–ª–∞ –≤ price_history

### 4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ –Ω–µ –≤–∫–ª—é—á–µ–Ω**
- CRON_ENABLED –Ω–µ –±—ã–ª —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ .env
- CRON_TIME –Ω–µ –±—ã–ª —É–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ

---

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `insertOrUpdateListing()` –≤ db-pg.js**

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:**
- –¢–µ–ø–µ—Ä—å —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ä—É—é —Ü–µ–Ω—É –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
- –ï—Å–ª–∏ —Ü–µ–Ω–∞ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å, –æ–Ω–∞ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É `price_history`
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–º, –±—ã–ª–æ –ª–∏ —Å–æ–∑–¥–∞–Ω–æ –Ω–æ–≤–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–æ
- –ü–µ—Ä–µ–¥–∞–µ—Ç `sessionId` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

**–ö–æ–¥:**
```javascript
async function insertOrUpdateListing(listingData, sessionId = null) {
  // 1. –ü–æ–ª—É—á–∞–µ–º —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ
  // 2. –í—Å—Ç–∞–≤–ª—è–µ–º/–æ–±–Ω–æ–≤–ª—è–µ–º –æ—Å–Ω–æ–≤–Ω—É—é —Ç–∞–±–ª–∏—Ü—É
  // 3. –ï—Å–ª–∏ —Ü–µ–Ω–∞ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å, –ø–∏—à–µ–º –≤ price_history
  // 4. –í–æ–∑–≤—Ä–∞—â–∞–µ–º {success, listingId, action, priceChanged}
}
```

### 2. **–û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ parser-db.js**

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:**
- –ü—Ä–∏ –≤—ã–∑–æ–≤–µ `insertOrUpdateListing()` —Ç–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è `sessionId`
- –û—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω—ã —á–µ—Ä–µ–∑ —Ñ–ª–∞–≥ `priceChanged` –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ

### 3. **–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ API endpoints –≤ api-db-routes.js**

**–ù–æ–≤—ã–µ endpoints:**

```
GET /api/db/overview     - –ø–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ë–î (–≤—Å–µ–≥–æ, —Å—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞, –¥–∏–∞–ø–∞–∑–æ–Ω)
GET /api/db/data         - –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
GET /api/db/regions      - –ø–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º
```

–¢–µ–ø–µ—Ä—å –∫–Ω–æ–ø–∫–∞ "–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ –ë–î" –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –Ω—É–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ!

### 4. **–í–∫–ª—é—á–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ –≤ .env**

**–î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**
```env
CRON_ENABLED=true        # –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥
CRON_TIME=1 0 * * *      # –ü–∞—Ä—Å–∏–Ω–≥ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 00:01 (–ø–æ –ú–æ—Å–∫–≤–µ)
PARSER_TIME=00:01        # –í—Ä–µ–º—è –¥–ª—è scheduler
PARSER_TIMEZONE=Europe/Moscow  # –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å
MAX_PAGES=100            # –£–≤–µ–ª–∏—á–µ–Ω–æ —Å 10 –Ω–∞ 100 –¥–ª—è –±–æ–ª–µ–µ –ø–æ–ª–Ω–æ–≥–æ —Å–±–æ—Ä–∞
```

---

## üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–∞—Ä—Å–∏–Ω–≥ —Ç–µ–ø–µ—Ä—å

### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ (–∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 00:01)**
1. –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `runCronParsing()` –≤ server.js
2. –ü–∞—Ä—Å–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∏–∑ .env
3. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `smartUpsertListing()` –∫–æ—Ç–æ—Ä—ã–π:
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –ø–æ –Ω–æ–º–µ—Ä—É
   - –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –¥–∞—Ç—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞ —Å–∞–π—Ç–µ
   - –ï—Å–ª–∏ –¥–∞—Ç–∞ –≤–æ–∑—Ä–æ—Å–ª–∞, –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ `listing_history`
   - –ï—Å–ª–∏ —Ü–µ–Ω–∞ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å, –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ `price_history`
4. –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ª–æ–≥–∏ —Å–µ—Å—Å–∏–∏

### **–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –ë–î (–∫–Ω–æ–ø–∫–∞ "–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ –ë–î")**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ –ë–î"
2. –§—É–Ω–∫—Ü–∏—è `startParsing()` –≤—ã–∑—ã–≤–∞–µ—Ç —Ç—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞:
   - `/api/db/overview` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
   - `/api/db/data` - —Å–ø–∏—Å–æ–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
   - `/api/db/regions` - —Ä–µ–≥–∏–æ–Ω—ã
3. –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

### **–†—É—á–Ω–æ–π –ø–∞—Ä—Å–∏–Ω–≥ (–∫–Ω–æ–ø–∫–∞ "–ù–∞—á–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥")**
1. –í—ã–∑—ã–≤–∞–µ—Ç `startRealParsing()` - —Ä–µ–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ —Å–∞–π—Ç–∞
2. –ó–∞–ø—É—Å–∫–∞–µ—Ç –ø–∞—Ä—Å–µ—Ä —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ —Ü–µ–Ω–µ
3. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –ë–î —á–µ—Ä–µ–∑ `insertOrUpdateListing()` —Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º —Ü–µ–Ω—ã

---

## üìä –¢–∞–±–ª–∏—Ü—ã –ë–î –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ü–µ–Ω—ã

### **–¢–∞–±–ª–∏—Ü–∞ `listings`**
- –û—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å –æ–±—ä—è–≤–ª–µ–Ω–∏—è–º–∏
- –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á: `number` (–Ω–æ–º–µ—Ä –∞–≤—Ç–æ)
- –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –Ω–æ–º–µ—Ä–∞ –∏–∑–º–µ–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ: `price`, `region`, `status`, `date_updated`, `seller`, `url`

### **–¢–∞–±–ª–∏—Ü–∞ `price_history`** (–Ω–æ–≤–∞—è –ª–æ–≥–∏–∫–∞)
–ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ü–µ–Ω—ã –≤ `insertOrUpdateListing()`:
- `number` - –Ω–æ–º–µ—Ä –∞–≤—Ç–æ
- `old_price` - —Å—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞
- `new_price` - –Ω–æ–≤–∞—è —Ü–µ–Ω–∞
- `price_delta` - —Ä–∞–∑–Ω–∏—Ü–∞ (–Ω–æ–≤–∞—è - —Å—Ç–∞—Ä–∞—è)
- `change_direction` - 'increased' –∏–ª–∏ 'decreased'
- `session_id` - ID —Å–µ—Å—Å–∏–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞
- `updated_at` - –¥–∞—Ç–∞ –∑–∞–ø–∏—Å–∏

### **–¢–∞–±–ª–∏—Ü–∞ `listing_history`** (–¥–ª—è cron)
–ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ cron-–ø–∞—Ä—Å–∏–Ω–≥–µ —á–µ—Ä–µ–∑ `smartUpsertListing()`:
- –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç `date_updated` –Ω–∞ —Å–∞–π—Ç–µ –∏ –≤ –ë–î
- –ï—Å–ª–∏ –¥–∞—Ç–∞ –≤—ã—Ä–æ—Å–ª–∞, –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é –≤–∫–ª—é—á–∞—è `is_price_changed`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –Ω–∞ —Å–∞–π—Ç–µ

---

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä:**
```bash
npm install  # —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
node server.js
```

### **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000
2. –ù–∞–∂–º–∏—Ç–µ "–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ –ë–î" - –¥–æ–ª–∂–Ω—ã –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –¥–∞–Ω–Ω—ã–µ –∏–∑ –±–∞–∑—ã
3. –ù–∞–∂–º–∏—Ç–µ "–ù–∞—á–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥" - –Ω–∞—á–Ω–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ —Å–∞–π—Ç–∞ (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –≤—Ä–µ–º—è)
4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 00:01

### **–û—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥:**
```bash
# –í .env –∏–∑–º–µ–Ω–∏—Ç–µ:
CRON_ENABLED=false
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–†–µ–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ (`startRealParsing()`) —Ç—Ä–µ–±—É–µ—Ç –≤—Ä–µ–º–µ–Ω–∏**
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç Puppeteer –∏ –ø–∞—Ä—Å–∏—Ç —Å–∞–π—Ç autonomera777.net
   - –ú–æ–∂–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å 5+ –º–∏–Ω—É—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
   - –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ "–ù–∞—á–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥" —Å–µ—Ä–≤–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å

2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–µ**
   - –ù–µ —Ç—Ä–µ–±—É–µ—Ç –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `cron_logs`
   - –û–±–Ω–æ–≤–ª—è–µ—Ç –ë–î –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 00:01

3. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ –Ω–æ–º–µ—Ä—É –∞–≤—Ç–æ**
   - –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á: `number` (–Ω–æ–º–µ—Ä –∞–≤—Ç–æ)
   - –í—Å–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –¥–µ–ª–∞—é—Ç—Å—è –ø–æ –Ω–æ–º–µ—Ä—É, –Ω–µ –ø–æ –¥–∞—Ç–µ
   - –ï—Å–ª–∏ –Ω–æ–º–µ—Ä–∞ –Ω–µ—Ç –≤ –ë–î - –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ
   - –ï—Å–ª–∏ –Ω–æ–º–µ—Ä –µ—Å—Ç—å - –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ –ø–æ–ª—è

4. **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ü–µ–Ω—ã**
   - –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –¢–û–õ–¨–ö–û –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ü–µ–Ω—ã (—á–∏—Å–ª–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è)
   - –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ `price_history` —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è (increase/decrease)
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ç—Ä–µ–Ω–¥–∞ —Ü–µ–Ω

---

## üìà –°—Ç–∞—Ç—É—Å –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è insertOrUpdateListing
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ü–µ–Ω—ã –≤ price_history
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã API endpoints –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ –ë–î
‚úÖ –í–∫–ª—é—á–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ –≤ .env
‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤ parser-db.js

**–ü–∞—Ä—Å–µ—Ä –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

---

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

### –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ –Ω–∞ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è:
```env
CRON_ENABLED=false
```

### –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞:
```env
CRON_TIME=30 1 * * *    # –í 01:30 –≤–º–µ—Å—Ç–æ 00:01
PARSER_TIMEZONE=Europe/Moscow  # –í–∞—à —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å
```

### –ï—Å–ª–∏ –ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞:
- –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (`.parser_offline_cache.json`)
- –ü—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –ë–î –¥–∞–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è

