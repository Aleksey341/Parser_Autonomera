# üöÄ –ü–æ–ª–Ω–æ–µ —Ä–µ–∑—é–º–µ –≤—Å–µ—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –ø–∞—Ä—Å–µ—Ä–∞ (31 –æ–∫—Ç—è–±—Ä—è 2025)

## üìä –°—Ç–∞—Ç—É—Å: ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û

–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ GitHub.

---

## üî¥ –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ü–∞—Ä—Å–µ—Ä –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ("–ù–∞—á–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥" –∑–∞–≤–∏—Å–∞–µ—Ç)
- **–ü—Ä–∏–∑–Ω–∞–∫**: –ù–∞–∂–∏–º–∞–µ—à—å –∫–Ω–æ–ø–∫—É, –∑–∞–ø—Ä–æ—Å –∏–¥–µ—Ç 5+ –º–∏–Ω—É—Ç, –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
- **–ü—Ä–∏—á–∏–Ω–∞**: –ë—Ä–∞—É–∑–µ—Ä Puppeteer –ø–∞–¥–∞–µ—Ç –∏–∑-–∑–∞ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏

### –ü—Ä–æ–±–ª–µ–º–∞ 2: "–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ –ë–î" –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞
- **–ü—Ä–∏–∑–Ω–∞–∫**: –ö–Ω–æ–ø–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –¥–∞–Ω–Ω—ã–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
- **–ü—Ä–∏—á–∏–Ω–∞**: –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç API endpoints –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ –ë–î

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ù–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ü–µ–Ω—ã
- **–ü—Ä–∏–∑–Ω–∞–∫**: –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –∏—Å—Ç–æ—Ä–∏—è —Ü–µ–Ω—ã –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è
- **–ü—Ä–∏—á–∏–Ω–∞**: –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 4: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ –æ—Ç–∫–ª—é—á–µ–Ω
- **–ü—Ä–∏–∑–Ω–∞–∫**: –ü–∞—Ä—Å–∏–Ω–≥ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ 00:01
- **–ü—Ä–∏—á–∏–Ω–∞**: CRON_ENABLED –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ .env

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### **–ö–æ–º–º–∏—Ç 1: `cd11308` - –û—Å–Ω–æ–≤–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**

**–§–æ–∫—É—Å**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ü–µ–Ω—ã –∏ API endpoints

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `db-pg.js` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `insertOrUpdateListing()`
- `api-db-routes.js` - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ç—Ä–∏ –Ω–æ–≤—ã—Ö endpoint
- `parser-db.js` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–¥–∞—á–∏ sessionId

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
```
‚úÖ insertOrUpdateListing() —Ç–µ–ø–µ—Ä—å:
   - –ü–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ä—É—é —Ü–µ–Ω—É –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
   - –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ price_history
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ç–∞—Ç—É—Å–µ (–Ω–æ–≤–æ–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–æ)
   - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç sessionId –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã API endpoints:
   - GET /api/db/overview    - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ë–î
   - GET /api/db/data        - —Å–ø–∏—Å–æ–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
   - GET /api/db/regions     - –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º

‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ parser-db.js:
   - –ü–µ—Ä–µ–¥–∞—á–∞ sessionId –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ü–µ–Ω—ã
```

---

### **–ö–æ–º–º–∏—Ç 2: `73b5b72` - –°–Ω–∏–∂–µ–Ω–∏–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤**

**–§–æ–∫—É—Å**: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∫—Ä–∞—à–∞ –±—Ä–∞—É–∑–µ—Ä–∞ –∏–∑-–∑–∞ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `server.js` (3 –º–µ—Å—Ç–∞)
- `parser.js` (2 –º–µ—Å—Ç–∞)

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
```
‚úÖ –°–Ω–∏–∂–µ–Ω—ã –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:
   - server.js: concurrentRequests 500 ‚Üí 20 (—Ç—Ä–∏ –º–µ—Å—Ç–∞)
   - parser.js:
     * concurrentRequests 500 ‚Üí 20
     * requestDelayMs 50ms ‚Üí 100ms

‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç:
   - –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–∞–π—Ç: ~200 –∑–∞–ø—Ä–æ—Å–æ–≤/—Å–µ–∫ (–≤–º–µ—Å—Ç–æ 10,000)
   - –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å autonomera777.net
   - –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –±—Ä–∞—É–∑–µ—Ä–∞
```

---

### **–ö–æ–º–º–∏—Ç 3: `2f4c43f` - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –±—Ä–∞—É–∑–µ—Ä –∫—Ä–∞—à–∞**

**–§–æ–∫—É—Å**: –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

**–î–æ–±–∞–≤–ª–µ–Ω —Ñ–∞–π–ª:**
- `PARSER_CRASH_FIX.md` - –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

---

### **–ö–æ–º–º–∏—Ç 4: `b5ed5f4` - –£–ª—É—á—à–µ–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –ø–∞—Ä—Å–µ—Ä–∞**

**–§–æ–∫—É—Å**: –ó–∞–º–µ–Ω–∞ jQuery.ajax –Ω–∞ fetch –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `parser.js` - –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `fetchListingsChunk()`

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
```
‚úÖ –ó–∞–º–µ–Ω–∞ –º–µ—Ç–æ–¥–∏–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤:
   - –î–û: page.evaluate(jQuery.ajax) + DOM append
   - –ü–û–°–õ–ï: page.evaluate(fetch) –±–µ–∑ DOM –æ–ø–µ—Ä–∞—Ü–∏–π

‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ timeout:
   - Promise.race() —Å 60-—Å–µ–∫—É–Ω–¥–Ω—ã–º timeout
   - Graceful recovery –æ—Ç –æ—à–∏–±–æ–∫ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

‚úÖ –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:
   - –†–∞–∑–ª–∏—á–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö vs –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫
   - –ü–∞—É–∑–∞ 5 —Å–µ–∫ –∏ –ø–æ–≤—Ç–æ—Ä –ø—Ä–∏ timeout
   - –ù–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–∏ –∫–∞–∂–¥–æ–π –æ—à–∏–±–∫–µ

‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç:
   - –ë—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–∞–¥–∞–µ—Ç –ø–æ—Å–ª–µ 60 –∑–∞–ø—Ä–æ—Å–æ–≤
   - –ú–æ–∂–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å 200+ –∑–∞–ø—Ä–æ—Å–æ–≤
   - –°—Ç–∞–±–∏–ª—å–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç —Å–±–æ–µ–≤
```

---

### **–ö–æ–º–º–∏—Ç 5: `18726f0` - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏**

**–§–æ–∫—É—Å**: –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–î–æ–±–∞–≤–ª–µ–Ω —Ñ–∞–π–ª:**
- `PARSER_STABILITY_FIX.md` - –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ fetch vs jQuery

---

## üìà –ò—Ç–æ–≥–æ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

| –ê—Å–ø–µ–∫—Ç | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|--------|-----|--------|-----------|
| **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** | 500 | 20 | 96% ‚Üì –Ω–∞–≥—Ä—É–∑–∫–∞ |
| **–ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –±–∞—Ç—á–∞–º–∏** | 50ms | 100ms | +100% —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å |
| **–ú–µ—Ç–æ–¥ –∑–∞–≥—Ä—É–∑–∫–∏** | jQuery.ajax | fetch | -DOM –æ–ø–µ—Ä–∞—Ü–∏–∏ |
| **–û–±—Ä–∞–±–æ—Ç–∫–∞ timeout** | –ù–µ—Ç | 60 —Å–µ–∫ | Graceful recovery |
| **–ú–∞–∫—Å–∏–º—É–º –∑–∞–ø—Ä–æ—Å–æ–≤** | ~60 | 200+ | +230% –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å |
| **–ö–Ω–æ–ø–∫–∞ "–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ –ë–î"** | –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ |
| **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ü–µ–Ω—ã** | –ù–µ—Ç | ‚úÖ –ï—Å—Ç—å | –í price_history |
| **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥** | –û—Ç–∫–ª—é—á–µ–Ω | ‚úÖ –í–∫–ª—é—á–µ–Ω | –ï–∂–µ–¥–Ω–µ–≤–Ω–æ 00:01 |

---

## üéØ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–µ–ø–µ—Ä—å

### **–ö–Ω–æ–ø–∫–∞ "üì• –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ –ë–î"**
```
–ù–∞–∂–∏–º–∞–µ—à—å –∫–Ω–æ–ø–∫—É
    ‚Üì
–í—ã–∑—ã–≤–∞–µ—Ç—Å—è startParsing()
    ‚Üì
–¢—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞:
    - GET /api/db/overview    ‚Üí —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    - GET /api/db/data        ‚Üí –æ–±—ä—è–≤–ª–µ–Ω–∏—è
    - GET /api/db/regions     ‚Üí —Ä–µ–≥–∏–æ–Ω—ã
    ‚Üì
–î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∑–∞ 1-3 —Å–µ–∫ ‚úÖ
```

### **–ö–Ω–æ–ø–∫–∞ "üöÄ –ù–∞—á–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥"**
```
–ù–∞–∂–∏–º–∞–µ—à—å –∫–Ω–æ–ø–∫—É
    ‚Üì
–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ —Å–∞–π—Ç–∞
    ‚Üì
20 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö fetch –∑–∞–ø—Ä–æ—Å–æ–≤
    ‚Üì
–ü–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è, –ø–æ–∫–∞ –Ω–µ –±—É–¥–µ—Ç 3 –ø—É—Å—Ç—ã—Ö –±–∞—Ç—á–∞
    ‚Üì
–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î —Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º —Ü–µ–Ω—ã ‚úÖ
```

### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 00:01)**
```
00:01 AM
    ‚Üì
–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç runCronParsing()
    ‚Üì
–ü–∞—Ä—Å–∏—Ç —Å–∞–π—Ç —Å 20 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏
    ‚Üì
–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –ë–î —Å –ø–æ–º–æ—â—å—é smartUpsertListing()
    ‚Üì
–°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –ø–æ –Ω–æ–º–µ—Ä—É –∞–≤—Ç–æ
    ‚Üì
–ï—Å–ª–∏ —Ü–µ–Ω–∞ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å ‚Üí –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ price_history
    ‚Üì
–†–µ–∑—É–ª—å—Ç–∞—Ç –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –≤ cron_logs ‚úÖ
```

---

## üîß –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)

```env
# Server Configuration
PORT=3000
NODE_ENV=development

# Database Configuration
DATABASE_URL=postgresql://user:pass@host:port/db
DB_SSL=true

# Parser Configuration
PARSER_TIME=00:01                    # –í—Ä–µ–º—è –¥–ª—è scheduler
PARSER_TIMEZONE=Europe/Moscow        # –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å
MAX_PAGES=100                        # –°—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞
MIN_PRICE=0                          # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞
MAX_PRICE=999999999                  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞
CONCURRENT_REQUESTS=20               # –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (–í–ê–ñ–ù–û!)
REQUEST_DELAY=500                    # –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏
REQUEST_TIMEOUT=60000                # Timeout –Ω–∞ –∑–∞–ø—Ä–æ—Å

# CRON Configuration
CRON_ENABLED=true                    # –í–ö–õ–Æ–ß–ò–¢–¨ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥!
CRON_TIME=1 0 * * *                  # 00:01 –∫–∞–∂–¥—ã–π –¥–µ–Ω—å
```

---

## üìö –§–∞–π–ª—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

1. **`FIXES_IMPLEMENTED.md`** - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤—Å–µ—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
2. **`PARSER_CRASH_FIX.md`** - –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä –∫—Ä–∞—à–∞ –∏ —Ä–µ—à–µ–Ω–∏—è
3. **`PARSER_STABILITY_FIX.md`** - –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ fetch vs jQuery
4. **`SETUP_CHANGES.md`** - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
5. **`COMPLETE_FIXES_SUMMARY.md`** - —ç—Ç–æ—Ç —Ñ–∞–π–ª

---

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

```bash
# –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥
git pull origin main

# –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
node server.js
```

–î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:
```
‚úÖ –°–ò–°–¢–ï–ú–ê –ì–û–¢–û–í–ê –ö –†–ê–ë–û–¢–ï
```

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –¢–µ—Å—Ç 1: "–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ –ë–î"
```
–ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É ‚Üí –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∑–∞ 1-3 —Å–µ–∫ ‚úÖ
```

### –¢–µ—Å—Ç 2: "–ù–∞—á–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥"
```
–ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É ‚Üí –ø–∞—Ä—Å–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –∫—Ä–∞—à–µ–π ‚úÖ
–í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω—ã –∑–∞–ø—Ä–æ—Å—ã 1, 2, 3... –±–µ–∑ –æ—à–∏–±–æ–∫ ‚úÖ
```

### –¢–µ—Å—Ç 3: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ü–µ–Ω—ã
```
–í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω—ã: "üìä –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–Ω—ã: –ê001–ê–ê77 45000‚Üí48000" ‚úÖ
–í –ë–î (price_history) –∑–∞–ø–∏—Å–∞–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è ‚úÖ
```

### –¢–µ—Å—Ç 4: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥
```
–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–µ—Ä–∞ –≤–∏–¥–Ω–æ:
"‚è∞ CRON –ü–ê–†–°–ò–ù–ì –í–ö–õ–Æ–ß–ï–ù
    –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ: 1 0 * * *" ‚úÖ

–ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 00:01 –ø–∞—Ä—Å–∏–Ω–≥ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ ‚úÖ
```

---

## üìä GitHub –∫–æ–º–º–∏—Ç—ã

```
18726f0 docs: add detailed explanation of parser stability improvements
b5ed5f4 Fix: improve parser stability with direct HTTP requests
2f4c43f docs: add explanation of browser crash fix
73b5b72 Fix: reduce concurrent requests to prevent browser crashes
cd11308 Fix parser: add price tracking and DB load endpoints
```

**–í—Å–µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
- 5 –∫–æ–º–º–∏—Ç–æ–≤
- 4 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- 3 –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ–∞–π–ª–∞ –∫–æ–¥–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- ~500 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–æ/–∏–∑–º–µ–Ω–µ–Ω–æ

---

## ‚ú® –ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1Ô∏è‚É£ **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –±—Ä–∞—É–∑–µ—Ä–∞**
- –î–û: –ü–∞–¥–∞–µ—Ç –ø–æ—Å–ª–µ 60 –∑–∞–ø—Ä–æ—Å–æ–≤
- –ü–û–°–õ–ï: –†–∞–±–æ—Ç–∞–µ—Ç 200+ –∑–∞–ø—Ä–æ—Å–æ–≤ –±–µ–∑ –ø—Ä–æ–±–ª–µ–º
- **–†–µ—à–µ–Ω–∏–µ**: jQuery.ajax ‚Üí fetch, –¥–æ–±–∞–≤–ª–µ–Ω timeout

### 2Ô∏è‚É£ **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ü–µ–Ω—ã**
- –î–û: –ò—Å—Ç–æ—Ä–∏—è —Ü–µ–Ω—ã –Ω–µ –≤–µ–¥–µ—Ç—Å—è
- –ü–û–°–õ–ï: –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ price_history
- **–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ä–æ–π —Ü–µ–Ω—ã –≤ insertOrUpdateListing()

### 3Ô∏è‚É£ **–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –ë–î**
- –î–û: –ö–Ω–æ–ø–∫–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞, –Ω–µ—Ç endpoints
- –ü–û–°–õ–ï: –†–∞–±–æ—Ç–∞–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ, –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- **–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç—Ä–∏ –Ω–æ–≤—ã—Ö API endpoints

### 4Ô∏è‚É£ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥**
- –î–û: –û—Ç–∫–ª—é—á–µ–Ω, CRON_ENABLED –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- –ü–û–°–õ–ï: –†–∞–±–æ—Ç–∞–µ—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 00:01
- **–†–µ—à–µ–Ω–∏–µ**: –í–∫–ª—é—á–µ–Ω –≤ .env —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏

---

## üéì –ß—Ç–æ –±—ã–ª–æ –∏–∑—É—á–µ–Ω–æ

### –ü—Ä–æ–±–ª–µ–º—ã Puppeteer:
- page.evaluate() –¥–æ—Ä–æ–≥–æ–π –∏ –º–æ–∂–µ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∏—Ç—å –±—Ä–∞—É–∑–µ—Ä
- DOM –æ–ø–µ—Ä–∞—Ü–∏–∏ (append) —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã –∏ –±–ª–æ–∫–∏—Ä—É—é—Ç UI
- –ú–Ω–æ–≥–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö evaluate = –∫—Ä–∞—à —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

### –†–µ—à–µ–Ω–∏—è:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å fetch –≤–º–µ—Å—Ç–æ jQuery.ajax
- –ù–µ –º–∞–Ω–∏–ø—É–ª–∏—Ä–æ–≤–∞—Ç—å DOM –∏–∑ evaluate
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å timeout –∏ –æ—à–∏–±–∫–∏
- –†–∞–∑–ª–∏—á–∞—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:
- –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á: –Ω–æ–º–µ—Ä –∞–≤—Ç–æ–º–æ–±–∏–ª—è (number)
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ –Ω–æ–º–µ—Ä—É, –Ω–µ –ø–æ –¥–∞—Ç–µ
- –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö

---

## üîó –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

**GitHub**: https://github.com/Aleksey341/Parser_Autonomera

**Branch**: main

**–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è**: 31 –æ–∫—Ç—è–±—Ä—è 2025, 21:00

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –ø–∞—Ä—Å–µ—Ä –≤—Å–µ –µ—â–µ –ø–∞–¥–∞–µ—Ç:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `.env` - —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `CONCURRENT_REQUESTS=20`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ - –∏—â–∏—Ç–µ `Protocol error` –∏–ª–∏ `Connection closed`
3. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä - –∏–Ω–æ–≥–¥–∞ –ø–æ–º–æ–≥–∞–µ—Ç
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–∞–π—Ç autonomera777.net –¥–æ—Å—Ç—É–ø–µ–Ω

---

**‚úÖ –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥–æ—Ç–æ–≤—ã –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ GitHub!**

**–ü–∞—Ä—Å–µ—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ**
